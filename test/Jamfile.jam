import testing ;

project testcase

  : requirements <cxxflags>"-isystem/opt/c++/libs/boost-1.69-clang-8.0.0/include/boost-1_69"
  : requirements <cxxflags>"-isystem/opt/c++/libs/gmp-6.1.2-clang-8.0.0/include"
  : requirements <cxxflags>"-isystem/opt/c++/libs/z3-4.8.4-clang-8.0.0/include"
  : requirements <cxxflags>"-isystem/opt/c++/libs/ppl-1.2-clang-8.0.0/include"
  : requirements <linkflags>-L/opt/c++/libs/boost-1.69-clang-8.0.0/lib
  : requirements <linkflags>-L/opt/c++/libs/gmp-6.1.2-clang-8.0.0/lib
  : requirements <linkflags>-L/opt/c++/libs/z3-4.8.4-clang-8.0.0/lib
  : requirements <linkflags>-L/opt/c++/libs/ppl-1.2-clang-8.0.0/lib
  : requirements <linkflags>"-Wl,-rpath /opt/c++/libs/boost-1.69-clang-8.0.0/lib/"
  : requirements <linkflags>"-Wl,-rpath /opt/c++/libs/gmp-6.1.2-clang-8.0.0/lib"
  : requirements <linkflags>"-Wl,-rpath /opt/c++/libs/z3-4.8.4-clang-8.0.0/lib"
  : requirements <linkflags>"-Wl,-rpath /opt/c++/libs/ppl-1.2-clang-8.0.0/lib"
  : requirements <linkflags>"-lboost_unit_test_framework-clang-darwin80-x64-1_69"
  : requirements <linkflags>"-lboost_filesystem-clang-darwin80-x64-1_69"
  : requirements <linkflags>"-lboost_system-clang-darwin80-x64-1_69"
  : requirements <linkflags>"-lboost_program_options-clang-darwin80-x64-1_69"
  : requirements <linkflags>"-lboost_stacktrace_basic-clang-darwin80-x64-1_69"
  : requirements <linkflags>"-lgmp -lgmpxx -lppl -lz3 -lz -lm"
  : requirements <dll-path>/opt/c++/libs/boost-1.69-clang-8.0.0/lib
  : requirements <dll-path>/opt/c++/libs/gmp-6.1.2-clang-8.0.0/lib
  : requirements <dll-path>/opt/c++/libs/z3-4.8.4-clang-8.0.0/lib
  : requirements <dll-path>/opt/c++/libs/ppl-1.2-clang-8.0.0/lib

  : requirements <include>"$(SRC)/cmn"
  : requirements <include>"$(SRC)/hare"
  : requirements <include>"$(SRC)/../test"
  : requirements <testing.arg>"--log_level=message"

  ;


  # : requirements <toolset>gcc:<cxxflags>"-isystem/opt/c++/libs/boost-1.69-gcc-8.3.0/include/boost-1_69"
  # : requirements <toolset>gcc:<cxxflags>"-isystem/opt/c++/libs/gmp-6.1.2-gcc-8.3.0/include"
  # : requirements <toolset>gcc:<cxxflags>"-isystem/opt/c++/libs/ppl-1.2-gcc-8.3.0/include"
  # : requirements <toolset>gcc:<cxxflags>"-isystem/opt/c++/libs/z3-4.8.4-gcc-8.3.0/include"
  # : requirements <toolset>gcc:<linkflags>"-L/opt/c++/libs/boost-1.69-gcc-8.3.0/lib"
  # : requirements <toolset>gcc:<linkflags>-L/opt/c++/libs/gmp-6.1.2-gcc-8.3.0/lib
  # : requirements <toolset>gcc:<linkflags>-L/opt/c++/libs/ppl-1.2-gcc-8.3.0/lib
  # : requirements <toolset>gcc:<linkflags>-L/opt/c++/libs/z3-4.8.4-gcc-8.3.0/lib
  # : requirements <toolset>gcc:<linkflags>"-Wl,-rpath /opt/c++/libs/boost-1.69-gcc-8.3.0/lib/"
  # : requirements <toolset>gcc:<linkflags>"-lboost_unit_test_framework-gcc8-x64-1_69"
  # : requirements <toolset>gcc:<dll-path>/opt/c++/libs/boost-1.69-gcc-8.3.0/lib
  # : requirements <toolset>gcc:<dll-path>/opt/c++/libs/z3-4.8.4-gcc-8.3.0/lib

  # : requirements <toolset>gcc:<cxxflags>"-Wno-misleading-indentation -Wno-parentheses"



unit-test test
	: test_runner.cpp  [ GLOB hare : *.cpp ] [ glob-tree-ex $(SRC)/hare : *.cpp : command_line.cpp ] [ GLOB $(SRC)/cmn : *.cpp ]
  : <dll-path>/opt/c++/libs/boost-1.69-clang-8.0.0/lib
    <dll-path>/opt/c++/libs/gmp-6.1.2-clang-8.0.0/lib
    <dll-path>/opt/c++/libs/z3-4.8.4-clang-8.0.0/lib
    <dll-path>/opt/c++/libs/ppl-1.2-clang-8.0.0/lib
  ;

unit-test tmp
	: tmp.cpp  [ GLOB $(SRC)/cmn : *.cpp ]
  :
  ;


unit-test tmp2
	: tmp2.cpp
  :
  ;


# <cxxflags>"-fsanitize=address -fno-omit-frame-pointer"
# <linkflags>"-fsanitize=address -fno-omit-frame-pointer"
