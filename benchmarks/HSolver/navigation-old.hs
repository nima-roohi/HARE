VARIABLES [x1,x2,x3,x4]
MODES [ m1,m2,m3 ]
STATESPACE
  m1[[0,2],[0,1],[-1.207,-0.207],[-1.207,-0.207]]
  m2[[0,2],[1,3],[-1.5,-0.5],[-0.5,0.5]]
  m3[[2,3],[1,3],[-0.5,0.5],[0.5,1.5]]
INITIAL
  m3{x1>=2/\x1<=3/\x2>=1/\x2<=2/\x3>=-0.2/\x3<=0.2/\x4>=0.85/\x4<=1.05}
FLOW
  m1{x1_d=x3}{x2_d=x4}{x3_d=-1.2*x3+0.1*x4}{x4_d=0.1*x3-1.2*x4}
    [-1.1000[0.,0.,0.7071,0.7071]][-1.3000[0.,0.,-0.7071,0.7071]][0.[0.7649,0.,0.6419,0.0535][0.,0.7649,0.0535,0.6419]]
  m2{x1_d=x3}{x2_d=x4}{x3_d=-1.2*x3+0.1*x4}{x4_d=0.1*x3-1.2*x4}
    [-1.1000[0.,0.,0.7071,0.7071]][-1.3000[0.,0.,-0.7071,0.7071]][0.[0.7649,0.,0.6419,0.0535][0.,0.7649,0.0535,0.6419]]
  m3{x1_d=x3}{x2_d=x4}{x3_d=-1.2*x3+0.1*x4}{x4_d=0.1*x3-1.2*x4}
    [-1.1000[0.,0.,0.7071,0.7071]][-1.3000[0.,0.,-0.7071,0.7071]][0.[0.7649,0.,0.6419,0.0535][0.,0.7649,0.0535,0.6419]]
JUMP
  m1->m2{[x2>=1/\x4>=-0.707]/\[x1'=x1/\x2'=x2/\x3'+1=x3+0.707/\x4'=x4+0.707]}
  m2->m1{[x2<=1/\x4<=0]/\[x1'=x1/\x2'=x2/\x3'+0.707=x3+1/\x4'+0.707=x4]}
  m2->m3{[x1>=2/\x3>=-1]/\[x1'=x1/\x2'=x2/\x3'=x3+1/\x4'-1=x4]}
  m3->m2{[x1<=2/\x3<=0]/\[x1'=x1/\x2'=x2/\x3'+1=x3/\x4'=x4-1]}
UNSAFE
  m2{x1<1/\x2>2}
